import { Component, Input, ViewEncapsulation, ViewChild, ContentChild } from '@angular/core';
import { clamp, coerceBooleanProperty, coerceNumberProperty, cssUnit, isNumber } from '../common/util';
import { NgxGaugeLabel, NgxGaugeValue, NgxGaugePrepend, NgxGaugeAppend } from './gauge-directives';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
const DEFAULTS = {
    MIN: 0,
    MAX: 100,
    TYPE: 'arch',
    THICK: 4,
    FOREGROUND_COLOR: 'rgba(0, 150, 136, 1)',
    BACKGROUND_COLOR: 'rgba(0, 0, 0, 0.1)',
    CAP: 'butt',
    SIZE: 200
};
export class NgxGauge {
    get size() { return this._size; }
    set size(value) {
        this._size = coerceNumberProperty(value);
    }
    get margin() { return this._margin; }
    set margin(value) {
        this._margin = coerceNumberProperty(value);
    }
    get min() { return this._min; }
    set min(value) {
        this._min = coerceNumberProperty(value, DEFAULTS.MIN);
    }
    get animate() { return this._animate; }
    set animate(value) {
        this._animate = coerceBooleanProperty(value);
    }
    get max() { return this._max; }
    set max(value) {
        this._max = coerceNumberProperty(value, DEFAULTS.MAX);
    }
    get value() { return this._value; }
    set value(val) {
        this._value = coerceNumberProperty(val);
    }
    constructor(_elementRef, _renderer) {
        this._elementRef = _elementRef;
        this._renderer = _renderer;
        this._size = DEFAULTS.SIZE;
        this._min = DEFAULTS.MIN;
        this._max = DEFAULTS.MAX;
        this._animate = true;
        this._margin = 0;
        this._initialized = false;
        this._animationRequestID = 0;
        this.ariaLabel = '';
        this.ariaLabelledby = null;
        this.type = DEFAULTS.TYPE;
        this.cap = DEFAULTS.CAP;
        this.thick = DEFAULTS.THICK;
        this.foregroundColor = DEFAULTS.FOREGROUND_COLOR;
        this.backgroundColor = DEFAULTS.BACKGROUND_COLOR;
        // { "40" : { color: "green", bgOpacity: .2 }, ... }
        this.thresholds = Object.create(null);
        // { "25": { color: '#ccc', type: 'line', size: 8, label: "25 lbs" }, ... }
        this.markers = Object.create(null);
        this._value = 0;
        this.duration = 1200;
    }
    ngOnInit() {
        // if markers are to be added, but no margin specified then here we add 10 px.
        if (this.markers && Object.keys(this.markers).length > 0 && !this._margin)
            this._margin = 10;
    }
    ngOnChanges(changes) {
        const isCanvasPropertyChanged = changes['thick'] || changes['type'] || changes['cap'] || changes['size'];
        const isDataChanged = changes['value'] || changes['min'] || changes['max'];
        if (this._initialized) {
            if (isDataChanged) {
                let nv;
                if (changes['value']) {
                    nv = Number(changes['value'].currentValue);
                    nv = isNaN(nv) ? 0 : nv;
                    const prevVal = Number(changes['value'].previousValue);
                    this._oldChangeVal = isNaN(prevVal) ? this._oldChangeVal : prevVal;
                }
                this._update(nv, this._oldChangeVal);
            }
            if (isCanvasPropertyChanged) {
                this._destroy();
                this._init();
            }
        }
    }
    _updateSize() {
        this._renderer.setStyle(this._elementRef.nativeElement, 'width', cssUnit(this._getWidth()));
        this._renderer.setStyle(this._elementRef.nativeElement, 'height', cssUnit(this._getCanvasHeight()));
        this._canvas.nativeElement.width = this._getWidth();
        this._canvas.nativeElement.height = this._getCanvasHeight();
        this._renderer.setStyle(this._label.nativeElement, 'transform', 'translateY(' + (this.size / 3 * 2 - this.size / 13 / 4) + 'px)');
        this._renderer.setStyle(this._reading.nativeElement, 'transform', 'translateY(' + (this.size / 2 - this.size * 0.22 / 2) + 'px)');
    }
    ngAfterViewInit() {
        if (this._canvas) {
            this._init();
        }
    }
    ngOnDestroy() {
        this._destroy();
    }
    _getBounds(type) {
        let head, tail, start, end;
        if (type == 'semi') {
            head = Math.PI;
            tail = 2 * Math.PI;
            start = 180;
            end = 360;
        }
        else if (type == 'full') {
            head = 1.5 * Math.PI;
            tail = 3.5 * Math.PI;
            start = 270;
            end = start + 360;
        }
        else if (type === 'arch') {
            head = 0.8 * Math.PI;
            tail = 2.2 * Math.PI;
            start = 180 - (0.2 * 180);
            end = 360 + (0.2 * 180);
        }
        return { head, tail, start, end };
    }
    _drawShell(start, middle, tail, color) {
        let center = this._getCenter(), radius = this._getRadius();
        if (this._initialized) {
            this._clear();
            this._drawMarkersAndTicks();
            let ranges = this._getBackgroundColorRanges();
            this._context.lineWidth = this.thick;
            if (ranges && ranges.length > 0) {
                // if background color is not specified then use default background, unless opacity is provided in which case use the color
                // and opactity against color, to form the background color.
                this._context.lineCap = 'butt';
                for (let i = 0; i < ranges.length; ++i) {
                    let r = ranges[i];
                    this._context.beginPath();
                    this._context.strokeStyle = r.backgroundColor ? r.backgroundColor : (r.bgOpacity) ? r.color : this.backgroundColor;
                    if (r.bgOpacity !== undefined && r.bgOpacity !== null) {
                        this._context.globalAlpha = r.bgOpacity;
                    }
                    this._context.arc(center.x, center.y, radius, this._getDisplacement(r.start), this._getDisplacement(r.end), false);
                    this._context.stroke();
                    this._context.globalAlpha = 1;
                }
            }
            else {
                this._context.lineCap = this.cap;
                this._context.beginPath();
                this._context.strokeStyle = this.backgroundColor;
                this._context.arc(center.x, center.y, radius, start, tail, false);
                this._context.stroke();
            }
            this._drawFill(start, middle, tail, color);
        }
    }
    _drawFill(start, middle, tail, color) {
        let center = this._getCenter(), radius = this._getRadius();
        this._context.lineCap = this.cap;
        this._context.lineWidth = this.thick;
        middle = Math.max(middle, start); // never below 0%
        middle = Math.min(middle, tail); // never exceed 100%
        this._context.lineCap = this.cap;
        this._context.lineWidth = this.thick;
        this._context.beginPath();
        this._context.strokeStyle = color;
        this._context.arc(center.x, center.y, radius, start, middle, false);
        this._context.stroke();
    }
    _addMarker(angle, color, label, type, len, font) {
        var rad = angle * Math.PI / 180;
        let offset = 2;
        if (!len)
            len = 8;
        if (!type)
            type = 'line';
        let center = this._getCenter(), radius = this._getRadius();
        let x = (radius + this.thick / 2 + offset) * Math.cos(rad) + center.x;
        let y = (radius + this.thick / 2 + offset) * Math.sin(rad) + center.y;
        let x2 = (radius + this.thick / 2 + offset + len) * Math.cos(rad) + center.x;
        let y2 = (radius + this.thick / 2 + offset + len) * Math.sin(rad) + center.y;
        if (type == 'triangle') {
            //Draw the triangle marker
            this._context.beginPath();
            this._context.strokeStyle = color;
            this._context.moveTo(x, y);
            this._context.lineWidth = 1;
            let a2 = angle - 45;
            let a3 = angle + 45;
            if (a2 < 0)
                a2 += 360;
            if (a2 > 360)
                a2 -= 360;
            if (a3 < 0)
                a3 += 360;
            if (a3 > 360)
                a3 -= 360;
            let rad2 = a2 * Math.PI / 180;
            let x3 = len * Math.cos(rad2) + x;
            let y3 = len * Math.sin(rad2) + y;
            this._context.lineTo(x3, y3);
            let rad3 = a3 * Math.PI / 180;
            let x4 = len * Math.cos(rad3) + x;
            let y4 = len * Math.sin(rad3) + y;
            this._context.lineTo(x4, y4);
            this._context.lineTo(x, y);
            this._context.closePath();
            this._context.stroke();
            this._context.fillStyle = color;
            this._context.fill();
        }
        else { //line
            this._context.beginPath();
            this._context.lineWidth = .5;
            this._context.strokeStyle = color;
            this._context.moveTo(x, y);
            this._context.lineTo(x2, y2);
            this._context.closePath();
            this._context.stroke();
        }
        if (label) {
            this._context.save();
            this._context.translate(x2, y2);
            this._context.rotate((angle + 90) * (Math.PI / 180));
            this._context.textAlign = "center";
            this._context.font = (font) ? font : '13px Arial';
            this._context.fillText(label, 0, -3);
            this._context.restore();
        }
    }
    _clear() {
        this._context.clearRect(0, 0, this._getWidth(), this._getHeight());
    }
    _getWidth() {
        return this.size;
    }
    _getHeight() {
        return this.size;
    }
    // canvas height will be shorter for type 'semi' and 'arch'
    _getCanvasHeight() {
        return (this.type == 'arch' || this.type == 'semi')
            ? 0.85 * this._getHeight()
            : this._getHeight();
    }
    _getRadius() {
        const center = this._getCenter();
        var rad = center.x - this.thick;
        if (this._margin > 0)
            rad -= this._margin;
        return rad;
    }
    _getCenter() {
        var x = this._getWidth() / 2, y = this._getHeight() / 2;
        return { x, y };
    }
    _init() {
        this._context = this._canvas.nativeElement.getContext('2d');
        this._initialized = true;
        this._updateSize();
        this._create();
    }
    _destroy() {
        if (this._animationRequestID) {
            window.cancelAnimationFrame(this._animationRequestID);
            this._animationRequestID = 0;
        }
        this._clear();
        this._context = null;
        this._initialized = false;
    }
    _getForegroundColorByRange(value) {
        const thresh = this._getThresholdMatchForValue(value);
        return thresh && thresh.color ? thresh.color : this.foregroundColor;
    }
    _getThresholdMatchForValue(value) {
        const match = Object.keys(this.thresholds)
            .filter(function (item) { return isNumber(item) && Number(item) <= value; })
            .sort((a, b) => Number(a) - Number(b))
            .reverse()[0];
        if (match !== undefined) {
            const thresh = this.thresholds[match];
            const t = {
                color: thresh.color,
                backgroundColor: thresh.backgroundColor,
                bgOpacity: thresh.bgOpacity,
                start: Number(match),
                end: this._getNextThreshold(Number(match))
            };
            return t;
        }
    }
    _getNextThreshold(value) {
        const match = Object.keys(this.thresholds)
            .filter(function (item) { return isNumber(item) && Number(item) > value; })
            .sort((a, b) => Number(a) - Number(b));
        if (match && match[0] !== undefined) {
            return Number(match[0]);
        }
        else {
            return this.max;
        }
    }
    _getBackgroundColorRanges() {
        let i = 0, ranges = [];
        do {
            let thresh = this._getThresholdMatchForValue(i);
            if (thresh) {
                ranges.push({
                    start: thresh.start,
                    end: thresh.end,
                    color: thresh.color,
                    backgroundColor: thresh.backgroundColor,
                    bgOpacity: thresh.bgOpacity
                });
                i = thresh.end;
                if (i >= this.max)
                    break;
            }
            else
                break;
        } while (true);
        return ranges;
    }
    _getDisplacement(v) {
        let type = this.type, bounds = this._getBounds(type), min = this.min, max = this.max, start = bounds.head, value = clamp(v, this.min, this.max), unit = (bounds.tail - bounds.head) / (max - min), displacement = unit * (value - min);
        return start + displacement;
    }
    _create(nv, ov) {
        const self = this;
        const type = this.type;
        const bounds = this._getBounds(type);
        const duration = this.duration;
        const min = this.min;
        const max = this.max;
        const value = clamp(this.value, min, max);
        const start = bounds.head;
        const unit = (bounds.tail - bounds.head) / (max - min);
        let displacement = unit * (value - min);
        const tail = bounds.tail;
        const color = this._getForegroundColorByRange(value);
        let startTime;
        if (self._animationRequestID) {
            window.cancelAnimationFrame(self._animationRequestID);
        }
        const animate = (timestamp) => {
            timestamp = timestamp || new Date().getTime();
            const runtime = timestamp - startTime;
            const progress = Math.min(runtime / duration, 1);
            const previousProgress = ov ? (ov - min) * unit : 0;
            const middle = start + previousProgress + displacement * progress;
            self._drawShell(start, middle, tail, color);
            if (self._animationRequestID && (runtime < duration)) {
                self._animationRequestID = window.requestAnimationFrame((ts) => animate(ts));
            }
            else {
                window.cancelAnimationFrame(self._animationRequestID);
            }
        };
        if (this._animate) {
            if (nv !== undefined && ov !== undefined && ov !== 0) {
                displacement = unit * nv - unit * ov;
            }
            self._animationRequestID = window.requestAnimationFrame((timestamp) => {
                startTime = timestamp || new Date().getTime();
                animate(startTime);
            });
        }
        else {
            self._drawShell(start, start + displacement, tail, color);
        }
    }
    _drawMarkersAndTicks() {
        /*
         * example:
        this.markers = {
            '-10': {
                color: '#555',
                size: 5,
                label: '-10',
                font: '11px verdana',
                type: 'line',
            },
            '10': {
                color: '#555',
                size: 5,
                label: '10',
                font: '11px verdana',
                type: 'line',
            },
            '20': {
                color: '#555',
                size: 5,
                label: '20',
                type: 'line',
            },
        };
        */
        if (this.markers) {
            const bounds = this._getBounds(this.type);
            const degrees = (bounds.end - bounds.start);
            const perD = degrees / (this.max - this.min);
            for (const mv in this.markers) {
                const n = Number(mv) - this.min;
                const angle = bounds.start + n * perD;
                const m = this.markers[mv];
                this._addMarker(angle, m.color, m.label, m.type, m.size, m.font);
            }
        }
    }
    _update(nv, ov) {
        this._clear();
        this._create(nv, ov);
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.4", ngImport: i0, type: NgxGauge, deps: [{ token: i0.ElementRef }, { token: i0.Renderer2 }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "18.2.4", type: NgxGauge, selector: "ngx-gauge", inputs: { ariaLabel: ["aria-label", "ariaLabel"], ariaLabelledby: ["aria-labelledby", "ariaLabelledby"], size: "size", margin: "margin", min: "min", animate: "animate", max: "max", type: "type", cap: "cap", thick: "thick", label: "label", append: "append", prepend: "prepend", foregroundColor: "foregroundColor", backgroundColor: "backgroundColor", thresholds: "thresholds", markers: "markers", value: "value", duration: "duration" }, host: { attributes: { "role": "slider", "aria-readonly": "true" }, properties: { "class.ngx-gauge-meter": "true", "attr.aria-valuemin": "min", "attr.aria-valuemax": "max", "attr.aria-valuenow": "value", "attr.aria-label": "ariaLabel", "attr.aria-labelledby": "ariaLabelledby" } }, queries: [{ propertyName: "_labelChild", first: true, predicate: NgxGaugeLabel, descendants: true }, { propertyName: "_prependChild", first: true, predicate: NgxGaugePrepend, descendants: true }, { propertyName: "_appendChild", first: true, predicate: NgxGaugeAppend, descendants: true }, { propertyName: "_valueDisplayChild", first: true, predicate: NgxGaugeValue, descendants: true }], viewQueries: [{ propertyName: "_canvas", first: true, predicate: ["canvas"], descendants: true, static: true }, { propertyName: "_label", first: true, predicate: ["rLabel"], descendants: true, static: true }, { propertyName: "_reading", first: true, predicate: ["reading"], descendants: true, static: true }], usesOnChanges: true, ngImport: i0, template: "<div class=\"reading-block\" #reading [style.fontSize]=\"(size-(margin*2)) * 0.22 + 'px'\">\r\n  <!-- This block can not be indented correctly, because line breaks cause layout spacing, related problem: https://pt.stackoverflow.com/q/276760/2998 -->\r\n  <u class=\"reading-affix\" [ngSwitch]=\"_prependChild != null\"><ng-content select=\"ngx-gauge-prepend\" *ngSwitchCase=\"true\"></ng-content><ng-container *ngSwitchCase=\"false\">{{prepend}}</ng-container></u><ng-container [ngSwitch]=\"_valueDisplayChild != null\"><ng-content *ngSwitchCase=\"true\" select=\"ngx-gauge-value\"></ng-content><ng-container *ngSwitchCase=\"false\">{{value | number}}</ng-container></ng-container><u class=\"reading-affix\" [ngSwitch]=\"_appendChild != null\"><ng-content select=\"ngx-gauge-append\" *ngSwitchCase=\"true\"></ng-content><ng-container *ngSwitchCase=\"false\">{{append}}</ng-container></u>\r\n</div>\r\n<div class=\"reading-label\" #rLabel\r\n     [style.fontSize]=\"(size-(margin*2)) / 13 + 'px'\"\r\n     [ngSwitch]=\"_labelChild != null\">\r\n  <ng-content select=\"ngx-gauge-label\" *ngSwitchCase=\"true\"></ng-content>\r\n  <ng-container *ngSwitchCase=\"false\">{{label}}</ng-container>\r\n</div>\r\n<canvas #canvas></canvas>\r\n", styles: [".ngx-gauge-meter{display:inline-block;text-align:center;position:relative}.reading-block{position:absolute;width:100%;font-weight:400;white-space:nowrap;text-align:center;overflow:hidden;text-overflow:ellipsis}.reading-label{font-family:inherit;width:100%;display:inline-block;position:absolute;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:400}.reading-affix{text-decoration:none;font-size:.6em;opacity:.8;font-weight:200;padding:0 .18em}.reading-affix:first-child{padding-left:0}.reading-affix:last-child{padding-right:0}\n"], dependencies: [{ kind: "directive", type: i1.NgSwitch, selector: "[ngSwitch]", inputs: ["ngSwitch"] }, { kind: "directive", type: i1.NgSwitchCase, selector: "[ngSwitchCase]", inputs: ["ngSwitchCase"] }, { kind: "pipe", type: i1.DecimalPipe, name: "number" }], encapsulation: i0.ViewEncapsulation.None }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.4", ngImport: i0, type: NgxGauge, decorators: [{
            type: Component,
            args: [{ selector: 'ngx-gauge', host: {
                        'role': 'slider',
                        'aria-readonly': 'true',
                        '[class.ngx-gauge-meter]': 'true',
                        '[attr.aria-valuemin]': 'min',
                        '[attr.aria-valuemax]': 'max',
                        '[attr.aria-valuenow]': 'value',
                        '[attr.aria-label]': 'ariaLabel',
                        '[attr.aria-labelledby]': 'ariaLabelledby'
                    }, encapsulation: ViewEncapsulation.None, template: "<div class=\"reading-block\" #reading [style.fontSize]=\"(size-(margin*2)) * 0.22 + 'px'\">\r\n  <!-- This block can not be indented correctly, because line breaks cause layout spacing, related problem: https://pt.stackoverflow.com/q/276760/2998 -->\r\n  <u class=\"reading-affix\" [ngSwitch]=\"_prependChild != null\"><ng-content select=\"ngx-gauge-prepend\" *ngSwitchCase=\"true\"></ng-content><ng-container *ngSwitchCase=\"false\">{{prepend}}</ng-container></u><ng-container [ngSwitch]=\"_valueDisplayChild != null\"><ng-content *ngSwitchCase=\"true\" select=\"ngx-gauge-value\"></ng-content><ng-container *ngSwitchCase=\"false\">{{value | number}}</ng-container></ng-container><u class=\"reading-affix\" [ngSwitch]=\"_appendChild != null\"><ng-content select=\"ngx-gauge-append\" *ngSwitchCase=\"true\"></ng-content><ng-container *ngSwitchCase=\"false\">{{append}}</ng-container></u>\r\n</div>\r\n<div class=\"reading-label\" #rLabel\r\n     [style.fontSize]=\"(size-(margin*2)) / 13 + 'px'\"\r\n     [ngSwitch]=\"_labelChild != null\">\r\n  <ng-content select=\"ngx-gauge-label\" *ngSwitchCase=\"true\"></ng-content>\r\n  <ng-container *ngSwitchCase=\"false\">{{label}}</ng-container>\r\n</div>\r\n<canvas #canvas></canvas>\r\n", styles: [".ngx-gauge-meter{display:inline-block;text-align:center;position:relative}.reading-block{position:absolute;width:100%;font-weight:400;white-space:nowrap;text-align:center;overflow:hidden;text-overflow:ellipsis}.reading-label{font-family:inherit;width:100%;display:inline-block;position:absolute;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:400}.reading-affix{text-decoration:none;font-size:.6em;opacity:.8;font-weight:200;padding:0 .18em}.reading-affix:first-child{padding-left:0}.reading-affix:last-child{padding-right:0}\n"] }]
        }], ctorParameters: () => [{ type: i0.ElementRef }, { type: i0.Renderer2 }], propDecorators: { _canvas: [{
                type: ViewChild,
                args: ['canvas', { static: true }]
            }], _label: [{
                type: ViewChild,
                args: ['rLabel', { static: true }]
            }], _reading: [{
                type: ViewChild,
                args: ['reading', { static: true }]
            }], _labelChild: [{
                type: ContentChild,
                args: [NgxGaugeLabel]
            }], _prependChild: [{
                type: ContentChild,
                args: [NgxGaugePrepend]
            }], _appendChild: [{
                type: ContentChild,
                args: [NgxGaugeAppend]
            }], _valueDisplayChild: [{
                type: ContentChild,
                args: [NgxGaugeValue]
            }], ariaLabel: [{
                type: Input,
                args: ['aria-label']
            }], ariaLabelledby: [{
                type: Input,
                args: ['aria-labelledby']
            }], size: [{
                type: Input
            }], margin: [{
                type: Input
            }], min: [{
                type: Input
            }], animate: [{
                type: Input
            }], max: [{
                type: Input
            }], type: [{
                type: Input
            }], cap: [{
                type: Input
            }], thick: [{
                type: Input
            }], label: [{
                type: Input
            }], append: [{
                type: Input
            }], prepend: [{
                type: Input
            }], foregroundColor: [{
                type: Input
            }], backgroundColor: [{
                type: Input
            }], thresholds: [{
                type: Input
            }], markers: [{
                type: Input
            }], value: [{
                type: Input
            }], duration: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2F1Z2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3gtZ2F1Z2Uvc3JjL2dhdWdlL2dhdWdlLnRzIiwiLi4vLi4vLi4vLi4vcHJvamVjdHMvbmd4LWdhdWdlL3NyYy9nYXVnZS9nYXVnZS5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDSCxTQUFTLEVBQ1QsS0FBSyxFQUVMLGlCQUFpQixFQU1qQixTQUFTLEVBQ1QsWUFBWSxFQUVmLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFDSCxLQUFLLEVBQ0wscUJBQXFCLEVBQ3JCLG9CQUFvQixFQUNwQixPQUFPLEVBQ1AsUUFBUSxFQUNYLE1BQU0sZ0JBQWdCLENBQUM7QUFDeEIsT0FBTyxFQUFFLGFBQWEsRUFBRSxhQUFhLEVBQUUsZUFBZSxFQUFFLGNBQWMsRUFBRSxNQUFNLG9CQUFvQixDQUFDOzs7QUFFbkcsTUFBTSxRQUFRLEdBQUc7SUFDYixHQUFHLEVBQUUsQ0FBQztJQUNOLEdBQUcsRUFBRSxHQUFHO0lBQ1IsSUFBSSxFQUFFLE1BQU07SUFDWixLQUFLLEVBQUUsQ0FBQztJQUNSLGdCQUFnQixFQUFFLHNCQUFzQjtJQUN4QyxnQkFBZ0IsRUFBRSxvQkFBb0I7SUFDdEMsR0FBRyxFQUFFLE1BQU07SUFDWCxJQUFJLEVBQUUsR0FBRztDQUNaLENBQUM7QUFzQkYsTUFBTSxPQUFPLFFBQVE7SUF5QmpCLElBQ0ksSUFBSSxLQUFhLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDekMsSUFBSSxJQUFJLENBQUMsS0FBYTtRQUNsQixJQUFJLENBQUMsS0FBSyxHQUFHLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzdDLENBQUM7SUFFRCxJQUNJLE1BQU0sS0FBYSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQzdDLElBQUksTUFBTSxDQUFDLEtBQWE7UUFDcEIsSUFBSSxDQUFD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USxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7WUFFbEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzFCLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBQyxFQUFFLENBQUMsQ0FBQztZQUU1QixJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQzFCLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDM0IsQ0FBQztRQUVELElBQUksS0FBSyxFQUFFLENBQUM7WUFDUixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ3JCLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUNoQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUNyRCxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUM7WUFDbkMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUM7WUFDbEQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ25DLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDNUIsQ0FBQztJQUVMLENBQUM7SUFFTyxNQUFNO1FBQ1YsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLEVBQUUsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUM7SUFDdkUsQ0FBQztJQUVPLFNBQVM7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LEdBQUc7c0JBQVgsS0FBSztnQkFFRyxLQUFLO3NCQUFiLEtBQUs7Z0JBRUcsS0FBSztzQkFBYixLQUFLO2dCQUVHLE1BQU07c0JBQWQsS0FBSztnQkFFRyxPQUFPO3NCQUFmLEtBQUs7Z0JBRUcsZUFBZTtzQkFBdkIsS0FBSztnQkFFRyxlQUFlO3NCQUF2QixLQUFLO2dCQUdHLFVBQVU7c0JBQWxCLEtBQUs7Z0JBR0csT0FBTztzQkFBZixLQUFLO2dCQUtGLEtBQUs7c0JBRFIsS0FBSztnQkFNRyxRQUFRO3NCQUFoQixLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICAgIENvbXBvbmVudCxcclxuICAgIElucHV0LFxyXG4gICAgU2ltcGxlQ2hhbmdlcyxcclxuICAgIFZpZXdFbmNhcHN1bGF0aW9uLFxyXG4gICAgUmVuZGVyZXIyLFxyXG4gICAgQWZ0ZXJWaWV3SW5pdCxcclxuICAgIEVsZW1lbnRSZWYsXHJcbiAgICBPbkNoYW5nZXMsXHJcbiAgICBPbkRlc3Ryb3ksXHJcbiAgICBWaWV3Q2hpbGQsXHJcbiAgICBDb250ZW50Q2hpbGQsXHJcbiAgICBPbkluaXRcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtcclxuICAgIGNsYW1wLFxyXG4gICAgY29lcmNlQm9vbGVhblByb3BlcnR5LFxyXG4gICAgY29lcmNlTnVtYmVyUHJvcGVydHksXHJcbiAgICBjc3NVbml0LFxyXG4gICAgaXNOdW1iZXJcclxufSBmcm9tICcuLi9jb21tb24vdXRpbCc7XHJcbmltcG9ydCB7IE5neEdhdWdlTGFiZWwsIE5neEdhdWdlVmFsdWUsIE5neEdhdWdlUHJlcGVuZCwgTmd4R2F1Z2VBcHBlbmQgfSBmcm9tICcuL2dhdWdlLWRpcmVjdGl2ZXMnO1xyXG5cclxuY29uc3QgREVGQVVMVFMgPSB7XHJcbiAgICBNSU46IDAsXHJcbiAgICBNQVg6IDEwMCxcclxuICAgIFRZUEU6ICdhcmNoJyxcclxuICAgIFRISUNLOiA0LFxyXG4gICAgRk9SRUdST1VORF9DT0xPUjogJ3JnYmEoMCwgMTUwLCAxMzYsIDEpJyxcclxuICAgIEJBQ0tHUk9VTkRfQ09MT1I6ICdyZ2JhKDAsIDAsIDAsIDAuMSknLFxyXG4gICAgQ0FQOiAnYnV0dCcsXHJcbiAgICBTSVpFOiAyMDBcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIE5neEdhdWdlVHlwZSA9ICdmdWxsJyB8ICdhcmNoJyB8ICdzZW1pJztcclxuZXhwb3J0IHR5cGUgTmd4R2F1Z2VDYXAgPSAncm91bmQnIHwgJ2J1dHQnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ25neC1nYXVnZScsXHJcbiAgICB0ZW1wbGF0ZVVybDogJ2dhdWdlLmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJ2dhdWdlLmNzcyddLFxyXG4gICAgaG9zdDoge1xyXG4gICAgICAgICdyb2xlJzogJ3NsaWRlcicsXHJcbiAgICAgICAgJ2FyaWEtcmVhZG9ubHknOiAndHJ1ZScsXHJcbiAgICAgICAgJ1tjbGFzcy5uZ3gtZ2F1Z2UtbWV0ZXJdJzogJ3RydWUnLFxyXG4gICAgICAgICdbYXR0ci5hcmlhLXZhbHVlbWluXSc6ICdtaW4nLFxyXG4gICAgICAgICdbYXR0ci5hcmlhLXZhbHVlbWF4XSc6ICdtYXgnLFxyXG4gICAgICAgICdbYXR0ci5hcmlhLXZhbHVlbm93XSc6ICd2YWx1ZScsXHJcbiAgICAgICAgJ1thdHRyLmFyaWEtbGFiZWxdJzogJ2FyaWFMYWJlbCcsXHJcbiAgICAgICAgJ1thdHRyLmFyaWEtbGFiZWxsZWRieV0nOiAnYXJpYUxhYmVsbGVkYnknXHJcblxyXG4gICAgfSxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcclxufSlcclxuZXhwb3J0IGNsYXNzIE5neEdhdWdlIGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCwgT25DaGFuZ2VzLCBPbkRlc3Ryb3ksIE9uSW5pdCB7XHJcblxyXG4gICAgQFZpZXdDaGlsZCgnY2FudmFzJywgeyBzdGF0aWM6IHRydWUgfSkgX2NhbnZhczogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ3JMYWJlbCcsIHsgc3RhdGljOiB0cnVlIH0pIF9sYWJlbDogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ3JlYWRpbmcnLCB7IHN0YXRpYzogdHJ1ZSB9KSBfcmVhZGluZzogRWxlbWVudFJlZjtcclxuXHJcbiAgICBAQ29udGVudENoaWxkKE5neEdhdWdlTGFiZWwpIF9sYWJlbENoaWxkOiBOZ3hHYXVnZUxhYmVsO1xyXG4gICAgQENvbnRlbnRDaGlsZChOZ3hHYXVnZVByZXBlbmQpIF9wcmVwZW5kQ2hpbGQ6IE5neEdhdWdlUHJlcGVuZDtcclxuICAgIEBDb250ZW50Q2hpbGQoTmd4R2F1Z2VBcHBlbmQpIF9hcHBlbmRDaGlsZDogTmd4R2F1Z2VBcHBlbmQ7XHJcbiAgICBAQ29udGVudENoaWxkKE5neEdhdWdlVmFsdWUpIF92YWx1ZURpc3BsYXlDaGlsZDogTmd4R2F1Z2VWYWx1ZTtcclxuXHJcbiAgICBwcml2YXRlIF9zaXplOiBudW1iZXIgPSBERUZBVUxUUy5TSVpFO1xyXG4gICAgcHJpdmF0ZSBfbWluOiBudW1iZXIgPSBERUZBVUxUUy5NSU47XHJcbiAgICBwcml2YXRlIF9tYXg6IG51bWJlciA9IERFRkFVTFRTLk1BWDtcclxuICAgIHByaXZhdGUgX2FuaW1hdGU6IGJvb2xlYW4gPSB0cnVlO1xyXG4gICAgcHJpdmF0ZSBfbWFyZ2luOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIHByaXZhdGUgX2luaXRpYWxpemVkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIF9jb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbiAgICBwcml2YXRlIF9hbmltYXRpb25SZXF1ZXN0SUQ6IG51bWJlciA9IDA7XHJcblxyXG4gICAgQElucHV0KCdhcmlhLWxhYmVsJykgYXJpYUxhYmVsOiBzdHJpbmcgPSAnJztcclxuXHJcbiAgICBASW5wdXQoJ2FyaWEtbGFiZWxsZWRieScpIGFyaWFMYWJlbGxlZGJ5OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBASW5wdXQoKVxyXG4gICAgZ2V0IHNpemUoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX3NpemU7IH1cclxuICAgIHNldCBzaXplKHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl9zaXplID0gY29lcmNlTnVtYmVyUHJvcGVydHkodmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIEBJbnB1dCgpXHJcbiAgICBnZXQgbWFyZ2luKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9tYXJnaW47IH1cclxuICAgIHNldCBtYXJnaW4odmFsdWU6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuX21hcmdpbiA9IGNvZXJjZU51bWJlclByb3BlcnR5KHZhbHVlKTtcclxuICAgIH0gICAgXHJcblxyXG4gICAgQElucHV0KClcclxuICAgIGdldCBtaW4oKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX21pbjsgfVxyXG4gICAgc2V0IG1pbih2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5fbWluID0gY29lcmNlTnVtYmVyUHJvcGVydHkodmFsdWUsIERFRkFVTFRTLk1JTik7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKVxyXG4gICAgZ2V0IGFuaW1hdGUoKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLl9hbmltYXRlOyB9XHJcbiAgICBzZXQgYW5pbWF0ZSh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX2FuaW1hdGUgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkodmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIEBJbnB1dCgpXHJcbiAgICBnZXQgbWF4KCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9tYXg7IH1cclxuICAgIHNldCBtYXgodmFsdWU6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuX21heCA9IGNvZXJjZU51bWJlclByb3BlcnR5KHZhbHVlLCBERUZBVUxUUy5NQVgpO1xyXG4gICAgfVxyXG5cclxuICAgIEBJbnB1dCgpIHR5cGU6IE5neEdhdWdlVHlwZSA9IERFRkFVTFRTLlRZUEUgYXMgTmd4R2F1Z2VUeXBlO1xyXG5cclxuICAgIEBJbnB1dCgpIGNhcDogTmd4R2F1Z2VDYXAgPSBERUZBVUxUUy5DQVAgYXMgTmd4R2F1Z2VDYXA7XHJcblxyXG4gICAgQElucHV0KCkgdGhpY2s6IG51bWJlciA9IERFRkFVTFRTLlRISUNLO1xyXG5cclxuICAgIEBJbnB1dCgpIGxhYmVsOiBzdHJpbmc7XHJcblxyXG4gICAgQElucHV0KCkgYXBwZW5kOiBzdHJpbmc7XHJcblxyXG4gICAgQElucHV0KCkgcHJlcGVuZDogc3RyaW5nO1xyXG5cclxuICAgIEBJbnB1dCgpIGZvcmVncm91bmRDb2xvcjogc3RyaW5nID0gREVGQVVMVFMuRk9SRUdST1VORF9DT0xPUjtcclxuXHJcbiAgICBASW5wdXQoKSBiYWNrZ3JvdW5kQ29sb3I6IHN0cmluZyA9IERFRkFVTFRTLkJBQ0tHUk9VTkRfQ09MT1I7XHJcblxyXG4gICAgLy8geyBcIjQwXCIgOiB7IGNvbG9yOiBcImdyZWVuXCIsIGJnT3BhY2l0eTogLjIgfSwgLi4uIH1cclxuICAgIEBJbnB1dCgpIHRocmVzaG9sZHM6IE9iamVjdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XHJcblxyXG4gICAgLy8geyBcIjI1XCI6IHsgY29sb3I6ICcjY2NjJywgdHlwZTogJ2xpbmUnLCBzaXplOiA4LCBsYWJlbDogXCIyNSBsYnNcIiB9LCAuLi4gfVxyXG4gICAgQElucHV0KCkgbWFya2VyczogT2JqZWN0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcclxuICAgIFxyXG4gICAgcHJpdmF0ZSBfdmFsdWU6IG51bWJlciA9IDA7XHJcblxyXG4gICAgQElucHV0KClcclxuICAgIGdldCB2YWx1ZSgpIHsgcmV0dXJuIHRoaXMuX3ZhbHVlOyB9XHJcbiAgICBzZXQgdmFsdWUodmFsOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl92YWx1ZSA9IGNvZXJjZU51bWJlclByb3BlcnR5KHZhbCk7XHJcbiAgICB9XHJcblxyXG4gICAgQElucHV0KCkgZHVyYXRpb246IG51bWJlciA9IDEyMDA7XHJcblxyXG4gICAgLyoqIGtlZXAgdHJhY2sgb2YgcHJldmlvdXMgdmFsdWUgaW4gY2FzZSBvZiBuZWdhdGl2ZSBudW1iZXJzIG9yIG1pc3R5cGVzICovXHJcbiAgICBwcml2YXRlIF9vbGRDaGFuZ2VWYWw6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9lbGVtZW50UmVmOiBFbGVtZW50UmVmLCBwcml2YXRlIF9yZW5kZXJlcjogUmVuZGVyZXIyKSB7IH1cclxuXHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgICAgICAvLyBpZiBtYXJrZXJzIGFyZSB0byBiZSBhZGRlZCwgYnV0IG5vIG1hcmdpbiBzcGVjaWZpZWQgdGhlbiBoZXJlIHdlIGFkZCAxMCBweC5cclxuICAgICAgICBpZiAodGhpcy5tYXJrZXJzICYmIE9iamVjdC5rZXlzKHRoaXMubWFya2VycykubGVuZ3RoID4gMCAmJiAhdGhpcy5fbWFyZ2luKSB0aGlzLl9tYXJnaW4gPSAxMDtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICAgICAgY29uc3QgaXNDYW52YXNQcm9wZXJ0eUNoYW5nZWQgPSBjaGFuZ2VzWyd0aGljayddIHx8IGNoYW5nZXNbJ3R5cGUnXSB8fCBjaGFuZ2VzWydjYXAnXSB8fCBjaGFuZ2VzWydzaXplJ107XHJcbiAgICAgICAgY29uc3QgaXNEYXRhQ2hhbmdlZCA9IGNoYW5nZXNbJ3ZhbHVlJ10gfHwgY2hhbmdlc1snbWluJ10gfHwgY2hhbmdlc1snbWF4J107XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9pbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICBpZiAoaXNEYXRhQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IG52O1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoYW5nZXNbJ3ZhbHVlJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICBudiA9IE51bWJlcihjaGFuZ2VzWyd2YWx1ZSddLmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbnYgPSBpc05hTihudikgPyAwIDogbnY7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldlZhbCA9IE51bWJlcihjaGFuZ2VzWyd2YWx1ZSddLnByZXZpb3VzVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29sZENoYW5nZVZhbCA9IGlzTmFOKHByZXZWYWwpID8gdGhpcy5fb2xkQ2hhbmdlVmFsIDogcHJldlZhbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZShudiwgdGhpcy5fb2xkQ2hhbmdlVmFsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaXNDYW52YXNQcm9wZXJ0eUNoYW5nZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Rlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2luaXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF91cGRhdGVTaXplKCkge1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyLnNldFN0eWxlKHRoaXMuX2VsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgJ3dpZHRoJywgY3NzVW5pdCh0aGlzLl9nZXRXaWR0aCgpKSk7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUodGhpcy5fZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCAnaGVpZ2h0JywgY3NzVW5pdCh0aGlzLl9nZXRDYW52YXNIZWlnaHQoKSkpO1xyXG4gICAgICAgIHRoaXMuX2NhbnZhcy5uYXRpdmVFbGVtZW50LndpZHRoID0gdGhpcy5fZ2V0V2lkdGgoKTtcclxuICAgICAgICB0aGlzLl9jYW52YXMubmF0aXZlRWxlbWVudC5oZWlnaHQgPSB0aGlzLl9nZXRDYW52YXNIZWlnaHQoKTtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlci5zZXRTdHlsZSh0aGlzLl9sYWJlbC5uYXRpdmVFbGVtZW50LFxyXG4gICAgICAgICAgICAndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZVkoJyArICh0aGlzLnNpemUgLyAzICogMiAtIHRoaXMuc2l6ZSAvIDEzIC8gNCkgKyAncHgpJyk7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUodGhpcy5fcmVhZGluZy5uYXRpdmVFbGVtZW50LFxyXG4gICAgICAgICAgICAndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZVkoJyArICh0aGlzLnNpemUgLyAyIC0gdGhpcy5zaXplICogMC4yMiAvIDIpICsgJ3B4KScpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgICAgICBpZiAodGhpcy5fY2FudmFzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2luaXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy5fZGVzdHJveSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2dldEJvdW5kcyh0eXBlOiBOZ3hHYXVnZVR5cGUpIHtcclxuICAgICAgICBsZXQgaGVhZCwgdGFpbCwgc3RhcnQsIGVuZDtcclxuICAgICAgICBpZiAodHlwZSA9PSAnc2VtaScpIHtcclxuICAgICAgICAgICAgaGVhZCA9IE1hdGguUEk7XHJcbiAgICAgICAgICAgIHRhaWwgPSAyICogTWF0aC5QSTtcclxuICAgICAgICAgICAgc3RhcnQgPSAxODA7XHJcbiAgICAgICAgICAgIGVuZCA9IDM2MDtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gJ2Z1bGwnKSB7XHJcbiAgICAgICAgICAgIGhlYWQgPSAxLjUgKiBNYXRoLlBJO1xyXG4gICAgICAgICAgICB0YWlsID0gMy41ICogTWF0aC5QSTtcclxuICAgICAgICAgICAgc3RhcnQgPSAyNzA7XHJcbiAgICAgICAgICAgIGVuZCA9IHN0YXJ0ICsgMzYwO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2FyY2gnKSB7XHJcbiAgICAgICAgICAgIGhlYWQgPSAwLjggKiBNYXRoLlBJO1xyXG4gICAgICAgICAgICB0YWlsID0gMi4yICogTWF0aC5QSTtcclxuICAgICAgICAgICAgc3RhcnQgPSAxODAgLSAoMC4yICogMTgwKTtcclxuICAgICAgICAgICAgZW5kID0gMzYwICsgKDAuMiAqIDE4MCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IGhlYWQsIHRhaWwsIHN0YXJ0LCBlbmQgfTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9kcmF3U2hlbGwoc3RhcnQ6IG51bWJlciwgbWlkZGxlOiBudW1iZXIsIHRhaWw6IG51bWJlciwgY29sb3I6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBjZW50ZXIgPSB0aGlzLl9nZXRDZW50ZXIoKSxcclxuICAgICAgICAgICAgcmFkaXVzID0gdGhpcy5fZ2V0UmFkaXVzKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9pbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9jbGVhcigpO1xyXG4gICAgICAgICAgICB0aGlzLl9kcmF3TWFya2Vyc0FuZFRpY2tzKCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgcmFuZ2VzID0gdGhpcy5fZ2V0QmFja2dyb3VuZENvbG9yUmFuZ2VzKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9jb250ZXh0LmxpbmVXaWR0aCA9IHRoaXMudGhpY2s7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAocmFuZ2VzICYmIHJhbmdlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpZiBiYWNrZ3JvdW5kIGNvbG9yIGlzIG5vdCBzcGVjaWZpZWQgdGhlbiB1c2UgZGVmYXVsdCBiYWNrZ3JvdW5kLCB1bmxlc3Mgb3BhY2l0eSBpcyBwcm92aWRlZCBpbiB3aGljaCBjYXNlIHVzZSB0aGUgY29sb3JcclxuICAgICAgICAgICAgICAgIC8vIGFuZCBvcGFjdGl0eSBhZ2FpbnN0IGNvbG9yLCB0byBmb3JtIHRoZSBiYWNrZ3JvdW5kIGNvbG9yLlxyXG4gICAgICAgICAgICAgICAgdGhpcy5fY29udGV4dC5saW5lQ2FwID0gJ2J1dHQnXHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHIgPSByYW5nZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb250ZXh0LnN0cm9rZVN0eWxlID0gci5iYWNrZ3JvdW5kQ29sb3IgPyByLmJhY2tncm91bmRDb2xvciA6IChyLmJnT3BhY2l0eSkgPyByLmNvbG9yIDogdGhpcy5iYWNrZ3JvdW5kQ29sb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHIuYmdPcGFjaXR5ICE9PSB1bmRlZmluZWQgJiYgci5iZ09wYWNpdHkgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29udGV4dC5nbG9iYWxBbHBoYSA9IHIuYmdPcGFjaXR5O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb250ZXh0LmFyYyhjZW50ZXIueCwgY2VudGVyLnksIHJhZGl1cywgdGhpcy5fZ2V0RGlzcGxhY2VtZW50KHIuc3RhcnQpLHRoaXMuX2dldERpc3BsYWNlbWVudChyLmVuZCksIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb250ZXh0LnN0cm9rZSgpOyAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRleHQuZ2xvYmFsQWxwaGEgPSAxOyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jb250ZXh0LmxpbmVDYXAgPSB0aGlzLmNhcDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jb250ZXh0LnN0cm9rZVN0eWxlID0gdGhpcy5iYWNrZ3JvdW5kQ29sb3I7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jb250ZXh0LmFyYyhjZW50ZXIueCwgY2VudGVyLnksIHJhZGl1cywgc3RhcnQsIHRhaWwsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fZHJhd0ZpbGwoc3RhcnQsIG1pZGRsZSwgdGFpbCwgY29sb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9kcmF3RmlsbChzdGFydDogbnVtYmVyLCBtaWRkbGU6IG51bWJlciwgdGFpbDogbnVtYmVyLCBjb2xvcjogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IGNlbnRlciA9IHRoaXMuX2dldENlbnRlcigpLFxyXG4gICAgICAgICAgICByYWRpdXMgPSB0aGlzLl9nZXRSYWRpdXMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fY29udGV4dC5saW5lQ2FwID0gdGhpcy5jYXA7XHJcbiAgICAgICAgdGhpcy5fY29udGV4dC5saW5lV2lkdGggPSB0aGlzLnRoaWNrOyAgICAgICAgICAgIFxyXG5cclxuICAgICAgICBtaWRkbGUgPSBNYXRoLm1heChtaWRkbGUsIHN0YXJ0KTsgLy8gbmV2ZXIgYmVsb3cgMCVcclxuICAgICAgICBtaWRkbGUgPSBNYXRoLm1pbihtaWRkbGUsIHRhaWwpOyAvLyBuZXZlciBleGNlZWQgMTAwJVxyXG5cclxuICAgICAgICB0aGlzLl9jb250ZXh0LmxpbmVDYXAgPSB0aGlzLmNhcDtcclxuICAgICAgICB0aGlzLl9jb250ZXh0LmxpbmVXaWR0aCA9IHRoaXMudGhpY2s7XHJcblxyXG4gICAgICAgIHRoaXMuX2NvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgdGhpcy5fY29udGV4dC5zdHJva2VTdHlsZSA9IGNvbG9yO1xyXG4gICAgICAgIHRoaXMuX2NvbnRleHQuYXJjKGNlbnRlci54LCBjZW50ZXIueSwgcmFkaXVzLCBzdGFydCwgbWlkZGxlLCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5fY29udGV4dC5zdHJva2UoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfYWRkTWFya2VyKGFuZ2xlLGNvbG9yLGxhYmVsPyx0eXBlPyxsZW4/LGZvbnQ/KSB7XHJcblxyXG4gICAgICAgIHZhciByYWQgPSBhbmdsZSAqIE1hdGguUEkgLyAxODA7IFxyXG5cclxuICAgICAgICBsZXQgb2Zmc2V0ID0gMjtcclxuXHJcbiAgICAgICAgaWYgKCFsZW4pIGxlbiA9IDg7XHJcblxyXG4gICAgICAgIGlmICghdHlwZSkgdHlwZSA9ICdsaW5lJztcclxuXHJcbiAgICAgICAgbGV0IGNlbnRlciA9IHRoaXMuX2dldENlbnRlcigpLFxyXG4gICAgICAgICAgICByYWRpdXMgPSB0aGlzLl9nZXRSYWRpdXMoKTtcclxuXHJcbiAgICAgICAgbGV0IHggPSAgKHJhZGl1cyArIHRoaXMudGhpY2svMiArIG9mZnNldCkgKiBNYXRoLmNvcyhyYWQpICsgY2VudGVyLng7XHJcbiAgICAgICAgbGV0IHkgPSAgKHJhZGl1cyArIHRoaXMudGhpY2svMiArIG9mZnNldCkgKiBNYXRoLnNpbihyYWQpICsgY2VudGVyLnk7ICAgIFxyXG4gICAgICAgIGxldCB4MiA9IChyYWRpdXMgKyB0aGlzLnRoaWNrLzIgKyBvZmZzZXQgKyBsZW4pICogTWF0aC5jb3MocmFkKSArIGNlbnRlci54O1xyXG4gICAgICAgIGxldCB5Mj0gKHJhZGl1cyArIHRoaXMudGhpY2svMiArIG9mZnNldCArIGxlbikgKiBNYXRoLnNpbihyYWQpICsgY2VudGVyLnk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHR5cGUgPT0gJ3RyaWFuZ2xlJykge1xyXG5cclxuICAgICAgICAgICAgLy9EcmF3IHRoZSB0cmlhbmdsZSBtYXJrZXJcclxuICAgICAgICAgICAgdGhpcy5fY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgdGhpcy5fY29udGV4dC5zdHJva2VTdHlsZSA9IGNvbG9yO1xyXG4gICAgICAgICAgICB0aGlzLl9jb250ZXh0Lm1vdmVUbyh4LHkpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fY29udGV4dC5saW5lV2lkdGggPSAxO1xyXG5cclxuICAgICAgICAgICAgbGV0IGEyID0gYW5nbGUgLSA0NTtcclxuICAgICAgICAgICAgbGV0IGEzID0gYW5nbGUgKyA0NTtcclxuXHJcbiAgICAgICAgICAgIGlmIChhMiA8IDApIGEyICs9IDM2MDtcclxuICAgICAgICAgICAgaWYgKGEyID4gMzYwKSBhMiAtPSAzNjA7XHJcblxyXG4gICAgICAgICAgICBpZiAoYTMgPCAwKSBhMyArPSAzNjA7XHJcbiAgICAgICAgICAgIGlmIChhMyA+IDM2MCkgYTMgLT0gMzYwO1xyXG5cclxuICAgICAgICAgICAgbGV0IHJhZDIgPSBhMiAqIE1hdGguUEkgLyAxODA7ICBcclxuICAgICAgICAgICAgbGV0IHgzID0gIGxlbiAqIE1hdGguY29zKHJhZDIpICsgeDtcclxuICAgICAgICAgICAgbGV0IHkzID0gIGxlbiAqIE1hdGguc2luKHJhZDIpICsgeTtcclxuICAgICAgICAgICAgdGhpcy5fY29udGV4dC5saW5lVG8oeDMseTMpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHJhZDMgPSBhMyAqIE1hdGguUEkgLyAxODA7ICBcclxuICAgICAgICAgICAgbGV0IHg0ID0gIGxlbiAqIE1hdGguY29zKHJhZDMpICsgeDtcclxuICAgICAgICAgICAgbGV0IHk0ID0gIGxlbiAqIE1hdGguc2luKHJhZDMpICsgeTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQubGluZVRvKHg0LHk0KTtcclxuICAgICAgICAgICAgdGhpcy5fY29udGV4dC5saW5lVG8oeCx5KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQuY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9jb250ZXh0LmZpbGxTdHlsZSA9IGNvbG9yO1xyXG4gICAgICAgICAgICB0aGlzLl9jb250ZXh0LmZpbGwoKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHsgLy9saW5lXHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQubGluZVdpZHRoID0gLjU7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlU3R5bGUgPSBjb2xvcjtcclxuICAgICBcclxuICAgICAgICAgICAgdGhpcy5fY29udGV4dC5tb3ZlVG8oeCx5KTtcclxuICAgICAgICAgICAgdGhpcy5fY29udGV4dC5saW5lVG8oeDIseTIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQuY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobGFiZWwpIHtcclxuICAgICAgICAgICAgdGhpcy5fY29udGV4dC5zYXZlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQudHJhbnNsYXRlKHgyLCB5Mik7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQucm90YXRlKChhbmdsZSArIDkwKSAqIChNYXRoLlBJIC8gMTgwKSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgdGhpcy5fY29udGV4dC5mb250ID0gKGZvbnQpID8gZm9udCA6ICcxM3B4IEFyaWFsJztcclxuICAgICAgICAgICAgdGhpcy5fY29udGV4dC5maWxsVGV4dChsYWJlbCwwLC0zKTtcclxuICAgICAgICAgICAgdGhpcy5fY29udGV4dC5yZXN0b3JlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9jbGVhcigpIHtcclxuICAgICAgICB0aGlzLl9jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLl9nZXRXaWR0aCgpLCB0aGlzLl9nZXRIZWlnaHQoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfZ2V0V2lkdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9nZXRIZWlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjYW52YXMgaGVpZ2h0IHdpbGwgYmUgc2hvcnRlciBmb3IgdHlwZSAnc2VtaScgYW5kICdhcmNoJ1xyXG4gICAgcHJpdmF0ZSBfZ2V0Q2FudmFzSGVpZ2h0KCkge1xyXG4gICAgICAgIHJldHVybiAodGhpcy50eXBlID09ICdhcmNoJyB8fCB0aGlzLnR5cGUgPT0gJ3NlbWknKVxyXG4gICAgICAgICAgICA/IDAuODUgKiB0aGlzLl9nZXRIZWlnaHQoKVxyXG4gICAgICAgICAgICA6IHRoaXMuX2dldEhlaWdodCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2dldFJhZGl1cygpIHtcclxuICAgICAgICBjb25zdCBjZW50ZXIgPSB0aGlzLl9nZXRDZW50ZXIoKTtcclxuICAgICAgICB2YXIgcmFkID0gY2VudGVyLnggLSB0aGlzLnRoaWNrO1xyXG4gICAgICAgIGlmICh0aGlzLl9tYXJnaW4gPiAwKSByYWQgLT0gdGhpcy5fbWFyZ2luO1xyXG4gICAgICAgIHJldHVybiByYWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfZ2V0Q2VudGVyKCkge1xyXG4gICAgICAgIHZhciB4ID0gdGhpcy5fZ2V0V2lkdGgoKSAvIDIsXHJcbiAgICAgICAgICAgIHkgPSB0aGlzLl9nZXRIZWlnaHQoKSAvIDI7XHJcbiAgICAgICAgcmV0dXJuIHsgeCwgeSB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2luaXQoKSB7XHJcbiAgICAgICAgdGhpcy5fY29udGV4dCA9ICh0aGlzLl9jYW52YXMubmF0aXZlRWxlbWVudCBhcyBIVE1MQ2FudmFzRWxlbWVudCkuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICB0aGlzLl9pbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlU2l6ZSgpO1xyXG4gICAgICAgIHRoaXMuX2NyZWF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2Rlc3Ryb3koKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2FuaW1hdGlvblJlcXVlc3RJRCkge1xyXG4gICAgICAgICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5fYW5pbWF0aW9uUmVxdWVzdElEKTtcclxuICAgICAgICAgICAgdGhpcy5fYW5pbWF0aW9uUmVxdWVzdElEID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fY2xlYXIoKTtcclxuICAgICAgICB0aGlzLl9jb250ZXh0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9pbml0aWFsaXplZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2dldEZvcmVncm91bmRDb2xvckJ5UmFuZ2UodmFsdWUpIHtcclxuXHJcbiAgICAgICAgY29uc3QgdGhyZXNoID0gdGhpcy5fZ2V0VGhyZXNob2xkTWF0Y2hGb3JWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRocmVzaCAmJiB0aHJlc2guY29sb3IgPyB0aHJlc2guY29sb3IgOiB0aGlzLmZvcmVncm91bmRDb2xvcjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9nZXRUaHJlc2hvbGRNYXRjaEZvclZhbHVlKHZhbHVlKSB7XHJcbiAgICAgICAgY29uc3QgbWF0Y2ggPSBPYmplY3Qua2V5cyh0aGlzLnRocmVzaG9sZHMpXHJcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGlzTnVtYmVyKGl0ZW0pICYmIE51bWJlcihpdGVtKSA8PSB2YWx1ZSB9KVxyXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gTnVtYmVyKGEpIC0gTnVtYmVyKGIpKVxyXG4gICAgICAgICAgICAucmV2ZXJzZSgpWzBdO1xyXG5cclxuICAgICAgICBpZiAobWF0Y2ggIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBjb25zdCB0aHJlc2ggPSB0aGlzLnRocmVzaG9sZHNbbWF0Y2hdO1xyXG4gICAgICAgICAgICBjb25zdCB0ID0ge1xyXG4gICAgICAgICAgICAgICAgY29sb3I6dGhyZXNoLmNvbG9yLFxyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOnRocmVzaC5iYWNrZ3JvdW5kQ29sb3IsXHJcbiAgICAgICAgICAgICAgICBiZ09wYWNpdHk6IHRocmVzaC5iZ09wYWNpdHksXHJcbiAgICAgICAgICAgICAgICBzdGFydDpOdW1iZXIobWF0Y2gpLFxyXG4gICAgICAgICAgICAgICAgZW5kOnRoaXMuX2dldE5leHRUaHJlc2hvbGQoTnVtYmVyKG1hdGNoKSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2dldE5leHRUaHJlc2hvbGQodmFsdWUpIDpudW1iZXIge1xyXG4gICAgICAgIGNvbnN0IG1hdGNoID0gT2JqZWN0LmtleXModGhpcy50aHJlc2hvbGRzKVxyXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBpc051bWJlcihpdGVtKSAmJiBOdW1iZXIoaXRlbSkgPiB2YWx1ZSB9KVxyXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gTnVtYmVyKGEpIC0gTnVtYmVyKGIpKSBcclxuXHJcbiAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzBdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE51bWJlcihtYXRjaFswXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYXg7XHJcbiAgICAgICAgfSAgICAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfZ2V0QmFja2dyb3VuZENvbG9yUmFuZ2VzKCkge1xyXG5cclxuICAgICAgICBsZXQgaSA9IDAscmFuZ2VzID0gW107XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICBsZXQgdGhyZXNoID0gdGhpcy5fZ2V0VGhyZXNob2xkTWF0Y2hGb3JWYWx1ZShpKTtcclxuICAgICAgICAgICAgaWYgKHRocmVzaCkge1xyXG4gICAgICAgICAgICAgICAgcmFuZ2VzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0OnRocmVzaC5zdGFydCxcclxuICAgICAgICAgICAgICAgICAgICBlbmQ6dGhyZXNoLmVuZCxcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGhyZXNoLmNvbG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogdGhyZXNoLmJhY2tncm91bmRDb2xvcixcclxuICAgICAgICAgICAgICAgICAgICBiZ09wYWNpdHk6IHRocmVzaC5iZ09wYWNpdHlcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaSA9IHRocmVzaC5lbmQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA+PSB0aGlzLm1heCkgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBicmVhaztcclxuICAgICAgICB9IHdoaWxlKHRydWUpO1xyXG5cclxuICAgICAgICByZXR1cm4gcmFuZ2VzO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBfZ2V0RGlzcGxhY2VtZW50KHY6bnVtYmVyKSB7XHJcbiAgICAgICAgbGV0ICB0eXBlID0gdGhpcy50eXBlLFxyXG4gICAgICAgICAgICBib3VuZHMgPSB0aGlzLl9nZXRCb3VuZHModHlwZSksXHJcbiAgICAgICAgICAgIG1pbiA9IHRoaXMubWluLFxyXG4gICAgICAgICAgICBtYXggPSB0aGlzLm1heCxcclxuICAgICAgICAgICAgc3RhcnQgPSBib3VuZHMuaGVhZCxcclxuICAgICAgICAgICAgdmFsdWUgPSBjbGFtcCh2LCB0aGlzLm1pbiwgdGhpcy5tYXgpLFxyXG4gICAgICAgICAgICB1bml0ID0gKGJvdW5kcy50YWlsIC0gYm91bmRzLmhlYWQpIC8gKG1heCAtIG1pbiksXHJcbiAgICAgICAgICAgIGRpc3BsYWNlbWVudCA9IHVuaXQgKiAodmFsdWUgLSBtaW4pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBzdGFydCArIGRpc3BsYWNlbWVudDtcclxuICAgICAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfY3JlYXRlKG52PzogbnVtYmVyLCBvdj86IG51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IHR5cGUgPSB0aGlzLnR5cGU7XHJcbiAgICAgICAgY29uc3QgYm91bmRzID0gdGhpcy5fZ2V0Qm91bmRzKHR5cGUpO1xyXG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gdGhpcy5kdXJhdGlvbjtcclxuICAgICAgICBjb25zdCBtaW4gPSB0aGlzLm1pbjtcclxuICAgICAgICBjb25zdCBtYXggPSB0aGlzLm1heDtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IGNsYW1wKHRoaXMudmFsdWUsIG1pbiwgbWF4KTtcclxuICAgICAgICBjb25zdCBzdGFydCA9IGJvdW5kcy5oZWFkO1xyXG4gICAgICAgIGNvbnN0IHVuaXQgPSAoYm91bmRzLnRhaWwgLSBib3VuZHMuaGVhZCkgLyAobWF4IC0gbWluKTtcclxuICAgICAgICBsZXQgZGlzcGxhY2VtZW50ID0gdW5pdCAqICh2YWx1ZSAtIG1pbik7XHJcbiAgICAgICAgY29uc3QgdGFpbCA9IGJvdW5kcy50YWlsO1xyXG4gICAgICAgIGNvbnN0IGNvbG9yID0gdGhpcy5fZ2V0Rm9yZWdyb3VuZENvbG9yQnlSYW5nZSh2YWx1ZSk7XHJcbiAgICAgICAgbGV0IHN0YXJ0VGltZTtcclxuXHJcbiAgICAgICAgaWYgKHNlbGYuX2FuaW1hdGlvblJlcXVlc3RJRCkge1xyXG4gICAgICAgICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUoc2VsZi5fYW5pbWF0aW9uUmVxdWVzdElEKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGFuaW1hdGUgPSAodGltZXN0YW1wOiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgdGltZXN0YW1wID0gdGltZXN0YW1wIHx8IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBydW50aW1lID0gdGltZXN0YW1wIC0gc3RhcnRUaW1lO1xyXG4gICAgICAgICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgubWluKHJ1bnRpbWUgLyBkdXJhdGlvbiwgMSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzUHJvZ3Jlc3MgPSBvdiA/IChvdiAtIG1pbikgKiB1bml0IDogMDtcclxuICAgICAgICAgICAgY29uc3QgbWlkZGxlID0gc3RhcnQgKyBwcmV2aW91c1Byb2dyZXNzICsgZGlzcGxhY2VtZW50ICogcHJvZ3Jlc3M7XHJcbiAgICAgICAgICAgIHNlbGYuX2RyYXdTaGVsbChzdGFydCwgbWlkZGxlLCB0YWlsLCBjb2xvcik7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLl9hbmltYXRpb25SZXF1ZXN0SUQgJiYgKHJ1bnRpbWUgPCBkdXJhdGlvbikpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuX2FuaW1hdGlvblJlcXVlc3RJRCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKHRzKSA9PiBhbmltYXRlKHRzKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUoc2VsZi5fYW5pbWF0aW9uUmVxdWVzdElEKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9hbmltYXRlKSB7XHJcbiAgICAgICAgICAgIGlmIChudiAhPT0gdW5kZWZpbmVkICYmIG92ICE9PSB1bmRlZmluZWQgJiYgb3YgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYWNlbWVudCA9IHVuaXQgKiBudiAtIHVuaXQgKiBvdjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWxmLl9hbmltYXRpb25SZXF1ZXN0SUQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCh0aW1lc3RhbXApID0+IHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0VGltZSA9IHRpbWVzdGFtcCB8fCBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICAgICAgICAgIGFuaW1hdGUoc3RhcnRUaW1lKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5fZHJhd1NoZWxsKHN0YXJ0LCBzdGFydCArIGRpc3BsYWNlbWVudCwgdGFpbCwgY29sb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9kcmF3TWFya2Vyc0FuZFRpY2tzKCkge1xyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogZXhhbXBsZTpcclxuICAgICAgICB0aGlzLm1hcmtlcnMgPSB7XHJcbiAgICAgICAgICAgICctMTAnOiB7XHJcbiAgICAgICAgICAgICAgICBjb2xvcjogJyM1NTUnLFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogNSxcclxuICAgICAgICAgICAgICAgIGxhYmVsOiAnLTEwJyxcclxuICAgICAgICAgICAgICAgIGZvbnQ6ICcxMXB4IHZlcmRhbmEnLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJ2xpbmUnLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnMTAnOiB7XHJcbiAgICAgICAgICAgICAgICBjb2xvcjogJyM1NTUnLFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogNSxcclxuICAgICAgICAgICAgICAgIGxhYmVsOiAnMTAnLFxyXG4gICAgICAgICAgICAgICAgZm9udDogJzExcHggdmVyZGFuYScsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnbGluZScsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICcyMCc6IHtcclxuICAgICAgICAgICAgICAgIGNvbG9yOiAnIzU1NScsXHJcbiAgICAgICAgICAgICAgICBzaXplOiA1LFxyXG4gICAgICAgICAgICAgICAgbGFiZWw6ICcyMCcsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnbGluZScsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuICAgICAgICAqL1xyXG4gICAgICAgIGlmICh0aGlzLm1hcmtlcnMpIHtcclxuICAgICAgICAgICAgY29uc3QgYm91bmRzID0gdGhpcy5fZ2V0Qm91bmRzKHRoaXMudHlwZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlZ3JlZXMgPSAoYm91bmRzLmVuZCAtIGJvdW5kcy5zdGFydCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBlckQgPSAgZGVncmVlcyAvICh0aGlzLm1heCAtIHRoaXMubWluKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBtdiBpbiB0aGlzLm1hcmtlcnMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBOdW1iZXIobXYpIC0gdGhpcy5taW47XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhbmdsZSA9IGJvdW5kcy5zdGFydCArIG4gKiBwZXJEO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbSA9IHRoaXMubWFya2Vyc1ttdl07XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hZGRNYXJrZXIoYW5nbGUsbS5jb2xvcixtLmxhYmVsLG0udHlwZSxtLnNpemUsbS5mb250KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF91cGRhdGUobnY6IG51bWJlciwgb3Y6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuX2NsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5fY3JlYXRlKG52LCBvdik7XHJcbiAgICB9XHJcblxyXG59XHJcbiIsIjxkaXYgY2xhc3M9XCJyZWFkaW5nLWJsb2NrXCIgI3JlYWRpbmcgW3N0eWxlLmZvbnRTaXplXT1cIihzaXplLShtYXJnaW4qMikpICogMC4yMiArICdweCdcIj5cclxuICA8IS0tIFRoaXMgYmxvY2sgY2FuIG5vdCBiZSBpbmRlbnRlZCBjb3JyZWN0bHksIGJlY2F1c2UgbGluZSBicmVha3MgY2F1c2UgbGF5b3V0IHNwYWNpbmcsIHJlbGF0ZWQgcHJvYmxlbTogaHR0cHM6Ly9wdC5zdGFja292ZXJmbG93LmNvbS9xLzI3Njc2MC8yOTk4IC0tPlxyXG4gIDx1IGNsYXNzPVwicmVhZGluZy1hZmZpeFwiIFtuZ1N3aXRjaF09XCJfcHJlcGVuZENoaWxkICE9IG51bGxcIj48bmctY29udGVudCBzZWxlY3Q9XCJuZ3gtZ2F1Z2UtcHJlcGVuZFwiICpuZ1N3aXRjaENhc2U9XCJ0cnVlXCI+PC9uZy1jb250ZW50PjxuZy1jb250YWluZXIgKm5nU3dpdGNoQ2FzZT1cImZhbHNlXCI+e3twcmVwZW5kfX08L25nLWNvbnRhaW5lcj48L3U+PG5nLWNvbnRhaW5lciBbbmdTd2l0Y2hdPVwiX3ZhbHVlRGlzcGxheUNoaWxkICE9IG51bGxcIj48bmctY29udGVudCAqbmdTd2l0Y2hDYXNlPVwidHJ1ZVwiIHNlbGVjdD1cIm5neC1nYXVnZS12YWx1ZVwiPjwvbmctY29udGVudD48bmctY29udGFpbmVyICpuZ1N3aXRjaENhc2U9XCJmYWxzZVwiPnt7dmFsdWUgfCBudW1iZXJ9fTwvbmctY29udGFpbmVyPjwvbmctY29udGFpbmVyPjx1IGNsYXNzPVwicmVhZGluZy1hZmZpeFwiIFtuZ1N3aXRjaF09XCJfYXBwZW5kQ2hpbGQgIT0gbnVsbFwiPjxuZy1jb250ZW50IHNlbGVjdD1cIm5neC1nYXVnZS1hcHBlbmRcIiAqbmdTd2l0Y2hDYXNlPVwidHJ1ZVwiPjwvbmctY29udGVudD48bmctY29udGFpbmVyICpuZ1N3aXRjaENhc2U9XCJmYWxzZVwiPnt7YXBwZW5kfX08L25nLWNvbnRhaW5lcj48L3U+XHJcbjwvZGl2PlxyXG48ZGl2IGNsYXNzPVwicmVhZGluZy1sYWJlbFwiICNyTGFiZWxcclxuICAgICBbc3R5bGUuZm9udFNpemVdPVwiKHNpemUtKG1hcmdpbioyKSkgLyAxMyArICdweCdcIlxyXG4gICAgIFtuZ1N3aXRjaF09XCJfbGFiZWxDaGlsZCAhPSBudWxsXCI+XHJcbiAgPG5nLWNvbnRlbnQgc2VsZWN0PVwibmd4LWdhdWdlLWxhYmVsXCIgKm5nU3dpdGNoQ2FzZT1cInRydWVcIj48L25nLWNvbnRlbnQ+XHJcbiAgPG5nLWNvbnRhaW5lciAqbmdTd2l0Y2hDYXNlPVwiZmFsc2VcIj57e2xhYmVsfX08L25nLWNvbnRhaW5lcj5cclxuPC9kaXY+XHJcbjxjYW52YXMgI2NhbnZhcz48L2NhbnZhcz5cclxuIl19